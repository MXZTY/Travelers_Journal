{"ast":null,"code":"import _classCallCheck from \"/mnt/c/Users/mtyso/Desktop/web3_asg2/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/mtyso/Desktop/web3_asg2/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/mtyso/Desktop/web3_asg2/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/mtyso/Desktop/web3_asg2/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/mtyso/Desktop/web3_asg2/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/mnt/c/Users/mtyso/Desktop/web3_asg2/my-app/src/components/PhotoMap.js\";\nimport React from \"react\";\nimport \"./EditPhotoForm.css\";\nimport MapContainer from \"./Map.js\";\n\nvar PhotoMap =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(PhotoMap, _React$Component);\n\n  function PhotoMap(props) {\n    var _this;\n\n    _classCallCheck(this, PhotoMap);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PhotoMap).call(this, props));\n\n    _this.calculateDist = function (lat1, lat2, lon1, lon2) {\n      function toRad(Value) {\n        /** Converts numeric degrees to radians */\n        return Value * Math.PI / 180;\n      }\n\n      var R = 6371e3; // metres\n\n      var φ1 = toRad(lat1);\n      var φ2 = toRad(lat2);\n      var Δφ = toRad(lat2 - lat1);\n      var Δλ = toRad(lon2 - lon1);\n      var a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) + Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\n      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n      return (R * c / 1000).toFixed(2); //to km\n    };\n\n    _this.setView = function () {\n      _this.props.setView(_this.props.currentPhoto);\n    };\n\n    _this.setEdit = function () {\n      _this.props.setEdit(_this.props.currentPhoto);\n    };\n\n    _this.state = {\n      lat: 0,\n      long: 0,\n      photos: _this.props.photos\n    };\n    return _this;\n  } //calculate distance between photo location and user location\n  //credit: haversine formula\n\n\n  _createClass(PhotoMap, [{\n    key: \"render\",\n    value: function render() {\n      //get current photo\n      var id = this.props.currentPhoto;\n      var imgURL = \"https://storage.googleapis.com/funwebdev-3rd-travel/medium/\";\n\n      if (this.state.photos.length > 0) {\n        //return the photo path from the id\n        var photo = this.state.photos.find(function (p) {\n          return p.id === id;\n        });\n        return React.createElement(\"article\", {\n          className: \"details flex-box\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"mapView\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"mapElement\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, React.createElement(MapContainer, {\n          city: photo.city,\n          containterElement: React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 55\n            },\n            __self: this\n          }),\n          lat: photo.latitude,\n          long: photo.longitude,\n          zoom: 16,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"mapInfo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: imgURL + photo.path,\n          alt: photo.title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }), React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, photo.title), React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, photo.city, \", \", photo.country), React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, this.calculateDist(photo.latitude, this.props.userLat, photo.longitude, this.props.userLong), \" KM from current location\"), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          onClick: this.setView,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, \"View\"), React.createElement(\"button\", {\n          onClick: this.setEdit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, \"Edit\"))));\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return PhotoMap;\n}(React.Component);\n\nexport default PhotoMap;","map":{"version":3,"sources":["/mnt/c/Users/mtyso/Desktop/web3_asg2/my-app/src/components/PhotoMap.js"],"names":["React","MapContainer","PhotoMap","props","calculateDist","lat1","lat2","lon1","lon2","toRad","Value","Math","PI","R","φ1","φ2","Δφ","Δλ","a","sin","cos","c","atan2","sqrt","toFixed","setView","currentPhoto","setEdit","state","lat","long","photos","id","imgURL","length","photo","find","p","city","latitude","longitude","path","title","country","userLat","userLong","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,qBAAP;AACA,OAAOC,YAAP,MAAyB,UAAzB;;IAEMC,Q;;;;;AAEJ,oBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AAChB,kFAAMA,KAAN;;AADgB,UAWlBC,aAXkB,GAWF,UAACC,IAAD,EAAOC,IAAP,EAAaC,IAAb,EAAmBC,IAAnB,EAA4B;AAC1C,eAASC,KAAT,CAAeC,KAAf,EAAsB;AACpB;AACA,eAAQA,KAAK,GAAGC,IAAI,CAACC,EAAd,GAAoB,GAA3B;AACD;;AACD,UAAIC,CAAC,GAAG,MAAR,CAL0C,CAK1B;;AAChB,UAAIC,EAAE,GAAGL,KAAK,CAACJ,IAAD,CAAd;AACA,UAAIU,EAAE,GAAGN,KAAK,CAACH,IAAD,CAAd;AACA,UAAIU,EAAE,GAAGP,KAAK,CAACH,IAAI,GAAGD,IAAR,CAAd;AACA,UAAIY,EAAE,GAAGR,KAAK,CAACD,IAAI,GAAGD,IAAR,CAAd;AAEA,UAAIW,CAAC,GACHP,IAAI,CAACQ,GAAL,CAASH,EAAE,GAAG,CAAd,IAAmBL,IAAI,CAACQ,GAAL,CAASH,EAAE,GAAG,CAAd,CAAnB,GACAL,IAAI,CAACS,GAAL,CAASN,EAAT,IAAeH,IAAI,CAACS,GAAL,CAASL,EAAT,CAAf,GAA8BJ,IAAI,CAACQ,GAAL,CAASF,EAAE,GAAG,CAAd,CAA9B,GAAiDN,IAAI,CAACQ,GAAL,CAASF,EAAE,GAAG,CAAd,CAFnD;AAGA,UAAII,CAAC,GAAG,IAAIV,IAAI,CAACW,KAAL,CAAWX,IAAI,CAACY,IAAL,CAAUL,CAAV,CAAX,EAAyBP,IAAI,CAACY,IAAL,CAAU,IAAIL,CAAd,CAAzB,CAAZ;AAEA,aAAO,CAAEL,CAAC,GAAGQ,CAAL,GAAQ,IAAT,EAAeG,OAAf,CAAuB,CAAvB,CAAP,CAhB0C,CAgBT;AAClC,KA5BiB;;AAAA,UA2ElBC,OA3EkB,GA2ER,YAAK;AACb,YAAKtB,KAAL,CAAWsB,OAAX,CAAmB,MAAKtB,KAAL,CAAWuB,YAA9B;AACD,KA7EiB;;AAAA,UA+ElBC,OA/EkB,GA+ER,YAAM;AACd,YAAKxB,KAAL,CAAWwB,OAAX,CAAmB,MAAKxB,KAAL,CAAWuB,YAA9B;AACD,KAjFiB;;AAEhB,UAAKE,KAAL,GAAW;AACTC,MAAAA,GAAG,EAAC,CADK;AAETC,MAAAA,IAAI,EAAC,CAFI;AAGTC,MAAAA,MAAM,EAAE,MAAK5B,KAAL,CAAW4B;AAHV,KAAX;AAFgB;AAOjB,G,CAED;AACA;;;;;6BAsBS;AAEP;AACA,UAAMC,EAAE,GAAG,KAAK7B,KAAL,CAAWuB,YAAtB;AACA,UAAMO,MAAM,gEAAZ;;AAEA,UAAI,KAAKL,KAAL,CAAWG,MAAX,CAAkBG,MAAlB,GAA2B,CAA/B,EAAkC;AAChC;AACA,YAAMC,KAAK,GAAG,KAAKP,KAAL,CAAWG,MAAX,CAAkBK,IAAlB,CAAuB,UAAAC,CAAC;AAAA,iBAAIA,CAAC,CAACL,EAAF,KAASA,EAAb;AAAA,SAAxB,CAAd;AAEA,eACE;AAAS,UAAA,SAAS,EAAC,kBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,YAAD;AACE,UAAA,IAAI,EAAEG,KAAK,CAACG,IADd;AAEE,UAAA,iBAAiB,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFrB;AAGE,UAAA,GAAG,EAAEH,KAAK,CAACI,QAHb;AAIE,UAAA,IAAI,EAAEJ,KAAK,CAACK,SAJd;AAKE,UAAA,IAAI,EAAE,EALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CADF,EAUE;AAAK,UAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,GAAG,EAAEP,MAAM,GAAGE,KAAK,CAACM,IAAzB;AAA+B,UAAA,GAAG,EAAEN,KAAK,CAACO,KAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKP,KAAK,CAACO,KAAX,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGP,KAAK,CAACG,IADT,QACiBH,KAAK,CAACQ,OADvB,CAHF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,KAAKvC,aAAL,CAAmB+B,KAAK,CAACI,QAAzB,EAAmC,KAAKpC,KAAL,CAAWyC,OAA9C,EAAuDT,KAAK,CAACK,SAA7D,EAAwE,KAAKrC,KAAL,CAAW0C,QAAnF,CADH,8BANF,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UATF,EAUE;AAAQ,UAAA,OAAO,EAAE,KAAKpB,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAVF,EAWE;AAAQ,UAAA,OAAO,EAAE,KAAKE,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAXF,CAVF,CADF,CADF;AA4BD,OAhCD,MAgCO;AACL,eAAO,IAAP;AACD;AACF;;;;EA3EoB3B,KAAK,CAAC8C,S;;AAwF7B,eAAe5C,QAAf","sourcesContent":["import React from \"react\";\r\nimport \"./EditPhotoForm.css\";\r\nimport MapContainer from \"./Map.js\";\r\n\r\nclass PhotoMap extends React.Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state={\r\n      lat:0,\r\n      long:0,\r\n      photos: this.props.photos,\r\n    };\r\n  }\r\n\r\n  //calculate distance between photo location and user location\r\n  //credit: haversine formula\r\n  calculateDist = (lat1, lat2, lon1, lon2) => {\r\n    function toRad(Value) {\r\n      /** Converts numeric degrees to radians */\r\n      return (Value * Math.PI) / 180;\r\n    }\r\n    let R = 6371e3; // metres\r\n    let φ1 = toRad(lat1);\r\n    let φ2 = toRad(lat2);\r\n    let Δφ = toRad(lat2 - lat1);\r\n    let Δλ = toRad(lon2 - lon1);\r\n\r\n    let a =\r\n      Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +\r\n      Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\r\n    let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\r\n    return ((R * c)/1000).toFixed(2);//to km\r\n  };\r\n\r\n  \r\n\r\n  render() {\r\n\r\n    //get current photo\r\n    const id = this.props.currentPhoto;\r\n    const imgURL = `https://storage.googleapis.com/funwebdev-3rd-travel/medium/`;\r\n\r\n    if (this.state.photos.length > 0) {\r\n      //return the photo path from the id\r\n      const photo = this.state.photos.find(p => p.id === id);\r\n\r\n      return (\r\n        <article className=\"details flex-box\">\r\n          <div className=\"mapView\">\r\n            <div className=\"mapElement\">\r\n              <MapContainer\r\n                city={photo.city}\r\n                containterElement={<div/>}\r\n                lat={photo.latitude}\r\n                long={photo.longitude}\r\n                zoom={16}\r\n              />\r\n            </div>\r\n            <div className=\"mapInfo\">\r\n              <img src={imgURL + photo.path} alt={photo.title} />\r\n              <h1>{photo.title}</h1>\r\n              <h1>\r\n                {photo.city}, {photo.country}\r\n              </h1>\r\n              <h1>\r\n                {this.calculateDist(photo.latitude, this.props.userLat, photo.longitude, this.props.userLong)} KM from current location\r\n              </h1>\r\n              <br />\r\n              <button onClick={this.setView}>View</button>\r\n              <button onClick={this.setEdit}>Edit</button>\r\n            </div>\r\n          </div>\r\n        </article>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  setView = () =>{\r\n    this.props.setView(this.props.currentPhoto);\r\n  }\r\n\r\n  setEdit = () => {\r\n    this.props.setEdit(this.props.currentPhoto);\r\n  }\r\n\r\n\r\n}\r\n\r\nexport default PhotoMap;\r\n"]},"metadata":{},"sourceType":"module"}